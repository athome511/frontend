{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _nonPreviewDefaultComponent = require('./nonPreviewDefaultComponent');\n\nvar _nonPreviewDefaultComponent2 = _interopRequireDefault(_nonPreviewDefaultComponent);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar FileInputBase64PreviewComponent = function (_Component) {\n  _inherits(FileInputBase64PreviewComponent, _Component);\n\n  function FileInputBase64PreviewComponent(props) {\n    _classCallCheck(this, FileInputBase64PreviewComponent);\n\n    var _this = _possibleConstructorReturn(this, (FileInputBase64PreviewComponent.__proto__ || Object.getPrototypeOf(FileInputBase64PreviewComponent)).call(this, props));\n\n    _this.state = {\n      image_objs_array: []\n    };\n    return _this;\n  }\n\n  _createClass(FileInputBase64PreviewComponent, [{\n    key: 'simulateClickOnInput',\n    value: function simulateClickOnInput() {\n      var clickEvent = new MouseEvent(\"click\", {\n        \"view\": window,\n        \"bubbles\": true,\n        \"cancelable\": false\n      });\n      this.fileInput.dispatchEvent(clickEvent);\n    }\n  }, {\n    key: 'handleFileChange',\n    value: function handleFileChange(e) {\n      var _this2 = this;\n\n      var inp_files = e.target.files;\n      var op_all_files = [];\n\n      var _loop = function _loop(i) {\n        var to_file = inp_files[i];\n        var reader_obj = new FileReader();\n        reader_obj.readAsDataURL(to_file);\n\n        reader_obj.onload = function () {\n          var to_file_obj = {\n            name: to_file.name,\n            type: to_file.type,\n            size: Math.round(to_file.size / 1000),\n            base64: reader_obj.result,\n            file: to_file\n          };\n          op_all_files.push(to_file_obj);\n\n          if (op_all_files.length === inp_files.length) {\n            if (_this2.props.multiple) {\n              _this2.setState({\n                image_objs_array: op_all_files\n              });\n\n              _this2.props.callbackFunction(op_all_files);\n            } else {\n              _this2.setState({\n                image_objs_array: op_all_files\n              });\n\n              _this2.props.callbackFunction(op_all_files[0]);\n            }\n          }\n        };\n      };\n\n      for (var i = 0; i < inp_files.length; i++) {\n        _loop(i);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      return _react2.default.createElement('div', {\n        style: this.props.parentStyle\n      }, _react2.default.createElement('label', {\n        htmlFor: this.props.inputId,\n        style: this.props.labelStyle\n      }, this.props.labelText), this.props.imagePreview && (this.state.image_objs_array.length !== 0 || this.props.defaultFiles.length !== 0) && _react2.default.createElement('div', {\n        style: this.props.imageContainerStyle\n      }, this.state.image_objs_array.length !== 0 && this.state.image_objs_array.map(function (img_obj) {\n        if (img_obj.type.split(\"/\")[0] === \"image\") {\n          return _react2.default.createElement('img', {\n            alt: img_obj.name,\n            src: img_obj.base64,\n            key: img_obj.name,\n            style: _this3.props.imageStyle\n          });\n        } else {\n          return _react2.default.cloneElement(_this3.props.nonPreviewComponent, {\n            type: img_obj.type,\n            size: img_obj.size,\n            title: img_obj.name,\n            key: img_obj.name\n          });\n        }\n      }), this.state.image_objs_array.length === 0 && this.props.defaultFiles.map(function (img_url, index) {\n        return _react2.default.createElement('img', {\n          alt: \"Preview \" + index,\n          src: img_url,\n          key: index,\n          style: _this3.props.imageStyle\n        });\n      })), _react2.default.createElement('input', {\n        name: this.props.inputName,\n        id: this.props.inputId,\n        type: 'file',\n        onChange: this.handleFileChange.bind(this),\n        multiple: this.props.multiple,\n        accept: this.props.accept,\n        ref: function ref(thisInput) {\n          _this3.fileInput = thisInput;\n        },\n        style: {\n          display: \"none\"\n        }\n      }), this.props.textBoxVisible && _react2.default.cloneElement(this.props.textFieldComponent, this.props.useTapEventPlugin ? {\n        onTouchTap: function onTouchTap() {\n          _this3.simulateClickOnInput();\n        },\n        value: this.state.image_objs_array.length === 1 ? this.state.image_objs_array[0].name : this.state.image_objs_array.length > 1 ? this.state.image_objs_array.length + \" files selected\" : this.props.defaultFiles.length === 0 ? \"No files selected\" : \"Leave empty to keep previous selection\"\n      } : {\n        onClick: function onClick() {\n          _this3.simulateClickOnInput();\n        },\n        value: this.state.image_objs_array.length === 1 ? this.state.image_objs_array[0].name : this.state.image_objs_array.length > 1 ? this.state.image_objs_array.length + \" files selected\" : this.props.defaultFiles.length === 0 ? \"No files selected\" : \"Leave empty to keep previous selection\"\n      }), _react2.default.cloneElement(this.props.buttonComponent, this.props.useTapEventPlugin ? {\n        onTouchTap: function onTouchTap() {\n          _this3.simulateClickOnInput();\n        }\n      } : {\n        onClick: function onClick() {\n          _this3.simulateClickOnInput();\n        }\n      }));\n    }\n  }]);\n\n  return FileInputBase64PreviewComponent;\n}(_react.Component);\n\nexports.default = FileInputBase64PreviewComponent;\nFileInputBase64PreviewComponent.defaultProps = {\n  callbackFunction: function callbackFunction() {},\n  labelText: \"File Upload\",\n  useTapEventPlugin: false,\n  multiple: true,\n  imagePreview: true,\n  textBoxVisible: false,\n  accept: \"*\",\n  imageContainerStyle: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    width: \"100%\",\n    flexWrap: \"wrap\"\n  },\n  imageStyle: {\n    marginTop: 5,\n    marginBottom: 5,\n    marginRight: 5,\n    width: \"auto\",\n    height: \"30vmin\",\n    boxShadow: \"rgba(0, 0, 0, 0.188235) 0px 10px 30px, rgba(0, 0, 0, 0.227451) 0px 6px 10px\" //zDepth 3\n\n  },\n  labelStyle: {\n    fontSize: 16,\n    color: 'rgba(0, 0, 0, 0.298039)',\n    display: 'block'\n  },\n  parentStyle: {\n    marginTop: 14\n  },\n  buttonComponent: _react2.default.createElement('button', {\n    type: 'button'\n  }, 'Attach'),\n  nonPreviewComponent: _react2.default.createElement(_nonPreviewDefaultComponent2.default, null),\n  textFieldComponent: _react2.default.createElement('input', {\n    type: 'text'\n  }),\n  defaultFiles: []\n};\nFileInputBase64PreviewComponent.propTypes = {\n  inputName: _propTypes2.default.string,\n  inputId: _propTypes2.default.string,\n  callbackFunction: _propTypes2.default.func,\n  labelText: _propTypes2.default.string,\n  useTapEventPlugin: _propTypes2.default.bool,\n  multiple: _propTypes2.default.bool,\n  imagePreview: _propTypes2.default.bool,\n  textBoxVisible: _propTypes2.default.bool,\n  accept: _propTypes2.default.string,\n  imageContainerStyle: _propTypes2.default.object,\n  imageStyle: _propTypes2.default.object,\n  labelStyle: _propTypes2.default.object,\n  parentStyle: _propTypes2.default.object,\n  buttonComponent: _propTypes2.default.element,\n  nonPreviewComponent: _propTypes2.default.element,\n  textFieldComponent: _propTypes2.default.element,\n  defaultFiles: _propTypes2.default.array\n};","map":null,"metadata":{},"sourceType":"script"}